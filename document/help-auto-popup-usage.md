# 帮助卡片自动弹出功能使用说明

## 功能概述

✅ **已实现**: 用户首次登录时自动弹出帮助卡片，用户点击"我知道了"后记录到localStorage，3个月内不重复弹出。

## 用户体验

### 首次登录流程
1. 用户登录成功后，页面加载完成
2. 延迟1秒后自动弹出帮助卡片
3. 用户阅读帮助内容
4. 用户点击"我知道了"按钮
5. 系统记录显示状态，3个月内不再自动弹出

### 后续使用
- 用户仍可通过左上角帮助按钮手动查看帮助
- 手动查看不会影响自动弹出的记录状态
- 3个月后会重新自动弹出一次

## 技术特性

### 触发机制
- ✅ 监听用户登录事件 (`authStateChange`)
- ✅ 支持页面刷新后的状态恢复
- ✅ 每个会话只自动弹出一次

### 存储机制
- ✅ 使用localStorage存储显示记录
- ✅ 存储键: `zhaoqiuku_help_shown`
- ✅ 有效期: 3个月（90天）
- ✅ 包含时间戳和版本信息

### 用户交互
- ✅ 点击"我知道了"按钮 → 记录状态
- ✅ 点击关闭按钮(×) → 记录状态  
- ✅ 点击遮罩层关闭 → 记录状态
- ✅ 按ESC键关闭 → 记录状态
- ✅ 手动点击帮助按钮 → 不记录状态

### 性能优化
- ✅ 延迟1秒弹出，确保页面完全加载
- ✅ 异步加载帮助内容，不阻塞UI
- ✅ WebView兼容性优化
- ✅ 防止重复绑定事件

## 开发者工具

### 测试命令
```javascript
// 重置帮助显示状态（下次登录将重新弹出）
resetHelpStatus()

// 立即触发首次帮助检查
testFirstTimeHelp()

// 查看当前存储状态
JSON.parse(localStorage.getItem('zhaoqiuku_help_shown') || '{}')
```

### 模拟过期测试
```javascript
// 模拟4个月前的记录（已过期）
const expiredData = {
  timestamp: Date.now() - (4 * 30 * 24 * 60 * 60 * 1000),
  version: "1.0"
};
localStorage.setItem('zhaoqiuku_help_shown', JSON.stringify(expiredData));
// 刷新页面后应该重新自动弹出
```

## 兼容性

- ✅ 支持现有的手动帮助功能
- ✅ 不影响原有的帮助按钮和样式
- ✅ 兼容WebView环境
- ✅ 支持移动端响应式设计
- ✅ localStorage不可用时功能降级

## 部署说明

功能已集成到现有帮助系统中，无需额外配置：

1. **核心文件**: `public/js/help/help-core_7ree.js`
2. **初始化**: `public/js/help/help-init_7ree.js`  
3. **样式**: `public/css/help-modal.css`
4. **依赖**: 认证管理器 (`public/js/auth-manager.js`)

## 验证清单

- [ ] 首次登录自动弹出帮助
- [ ] 点击"我知道了"后不再自动弹出
- [ ] 手动点击帮助按钮正常工作
- [ ] 3个月后重新自动弹出
- [ ] 页面刷新后状态正确恢复
- [ ] 移动端显示正常
- [ ] WebView环境正常工作

功能已完成开发，可以进行测试和部署。